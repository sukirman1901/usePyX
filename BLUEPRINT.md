# PROJECT PYX: Blueprint & Design Document

> **"One Language to Rule Them All"**  
> The Real-time Python Framework for Modern Web Applications

---

## 1. Vision & Goals

Menciptakan framework web modern yang menghapus batas antara Backend (Python) dan Frontend (JavaScript), dikhususkan untuk aplikasi yang membutuhkan **Kecepatan Tinggi** dan **Data Real-time**.

### Core Goals

| Goal | Description |
|------|-------------|
| **Zero Context Switching** | Developer Python tidak perlu menyentuh JavaScript, React, atau CSS manual |
| **Native Real-time** | Data mengalir via WebSocket secara default (Event Engine: `on_click`, `on_change`) |
| **High Performance** | Menggunakan engine Rust (Granian) untuk performa maksimal |
| **Why?** | Tradisional Framework (Django/Flask) lambat & butuh JS. Streamlit terbatas untuk dashboard. PyX menggabungkan keduanya. |

---

## 2. Technical Architecture

### Tech Stack

```
┌─────────────────────────────────────────────────┐
│                    Browser                       │
│              (Tiny JS Engine <5KB)               │
└───────────────────────┬─────────────────────────┘
                        │ WebSocket (Events)
┌───────────────────────▼─────────────────────────┐
│               Granian Server (Rust)              │
│                 High-Performance                 │
└───────────────────────┬─────────────────────────┘
                        │
┌───────────────────────▼─────────────────────────┐
│                 PyX Framework                    │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌────────┐│
│  │ Core    │ │   Web   │ │  Data   │ │  Lib   ││
│  │(Server) │ │  (UI)   │ │  (DB)   │ │(Auth)  ││
│  └─────────┘ └─────────┘ └─────────┘ └────────┘│
└─────────────────────────────────────────────────┘
```

### Components

| Layer | Sub-module | Purpose |
|-------|------------|---------|
| **Core** | `pyx.core` | Server loop, Router, Middleware, State Manager, Event Engine |
| **Web** | `pyx.web` | Zen Mode UI, PyxUI Components, Colors, Client JS |
| **Data** | `pyx.data` | SQLModel Wrapper (`db.save`, `Model`) |
| **Lib** | `pyx.lib` | Batteries: Auth, Email, Jobs, SEO, Admin Panel |

---

## 3. Competitive Advantage

| Aspect | React/Next.js | Streamlit | Laravel | **PyX** |
|--------|---------------|-----------|---------|---------|
| **Language** | JS + Python | Python (script) | PHP | **Python (full)** |
| **Performance** | Fast (client) | Slow (rerun) | Medium | **Very Fast (Rust)** |
| **Data Flow** | Pull (API) | Page reload | Request/Response | **Push (WebSocket)** |
| **Security** | Logic in browser | Server | Server | **Server (safe)** |
| **UI Design** | Free (Tailwind) | Fixed widgets | Admin panel | **Premium (PyxUI)** |
| **Best For** | E-commerce | Data science | Admin | **SaaS, Trading, AI** |

---

## 4. Project Structure (Refactored)

### Framework Core (`pyx/`)

```
pyx/
├── __init__.py          # Public API Exports
├── cli.py               # CLI Tool
├── core/                # Core Logic
│   ├── server.py        # App & Server
│   ├── router.py        # Routing
│   ├── events.py        # Event Manager
│   └── middleware.py    # Middleware Stack
├── web/                 # Frontend Layer
│   ├── ui.py            # Zen Mode Engine
│   ├── components/      # PyxUI, Charts, Lucide
│   └── client.py        # JS Bridge
├── data/                # Data Layer
│   └── database.py      # ORM
└── lib/                 # Batteries
    ├── auth.py          # Authentication
    ├── email.py         # Email Service
    └── admin/           # Admin Panel
```

### User Project (Generated by `pyx init`)

```
myproject/
├── main.py              # Entry point
├── assets/              # Static files
└── modules/             # MVC Architecture
    └── home/
        ├── __init__.py
        ├── models.py    # [M] Database Models
        ├── views.py     # [V] UI Components
        └── controller.py# [C] Logic & Events
```

---

## 5. Killer Features

### A. PyxUI (Premium Components)
Pre-built, beautiful components ready for SaaS.
```python
PyxUI.Card([
    PyxUI.CardHeader([PyxUI.CardTitle("Login")]),
    PyxUI.CardContent([
        PyxUI.Input(placeholder="Email", name="email"),
        PyxUI.Button("Login", className="w-full")
    ])
])
```

### B. Event Engine (No-JS Interactivity)
Bind Python functions directly to browser events.
```python
def on_click():
    print("Clicked!")
    return JS.toast("Success")

ui.button("Click Me").on_click(on_click)
```

### C. Batteries Included
- **Auth**: `app.use_auth()` (Login/Register built-in)
- **Admin**: Auto-CRUD for models.
- **SEO**: Meta tags & Sitemap generation.
- **Jobs**: Background worker support.

---

## 6. Development Roadmap

| Phase | Status | Features |
|-------|--------|----------|
| **Phase 1** | ✅ Done | Core Architecture (Server, State, Events) |
| **Phase 2** | ✅ Done | CLI & Project Structure (`pyx init`) |
| **Phase 3** | ✅ Done | UI Engine (Zen Mode & PyxUI) |
| **Phase 4** | ✅ Done | Database Layer (SQLModel) |
| **Phase 5** | ✅ Done | Authentication System (JWT/Session) |
| **Phase 6** | ✅ Done | Refactoring & Internal Cleanup |
| **Phase 7** | ✅ Done | Live Charts & Trading Components |
| **Phase 8** | ✅ **NEW** | Reflex Adoption (State, Actions, Computed Vars) |
| **Phase 9** | ✅ **NEW** | Database CLI (`pyx db *` commands) |
| **Phase 10** | ✅ **NEW** | Session Persistence |
| **Phase 11** | ✅ **NEW** | Background Tasks (`@background`, `@periodic`) |
| **Phase 12** | ✅ **NEW** | Auth Module (`pyx.contrib.auth`) |
| **Phase 13** | ⏳ Planned | Deployment Tools (Docker/Cloud) |

---

## 7. CLI Commands

```bash
# Initialize new project
pyx init myproject

# Create a new module
cd myproject
pyx make:module auth

# Run server
pyx run

# Database Migration
pyx db_migrate
```

---

## 8. Documentation

| Document | Purpose |
|----------|---------|
| `README.md` | General overview & installation |
| `SYNTAX_GUIDE.md` | API Reference for UI construction |
| `BLUEPRINT.md` | Architecture & Design Philosophy |
| `pyx/tutorial/` | Enterprise Guide (Deep Dive) |

---

*Built with ❤️ by PyX Team*
